<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yan Zhang â€” MoirÃ© & vdW Materials</title>
  <meta name="description" content="Yan Zhang (IOPCAS) â€” moirÃ©/twisted vdW materials, continuum models, TAPW, topological analysis." />
  <meta name="color-scheme" content="light dark" />
  <style>
  :root{
    /* Dark (default) */
    --bg:#0b1020; --bg-soft:#0f172a; --text:#e6eaf2; --muted:#b9c3d6;
    --card: #0b1220cc; --ring:#223047; --brand:#7dd3fc; --brand-2:#60a5fa; --accent:#a78bfa;
  }
  [data-theme="light"]{
    --bg:#f8fafc; --bg-soft:#ffffff; --text:#0f172a; --muted:#475569;
    --card:#ffffffcc; --ring:#e2e8f0; --brand:#0ea5e9; --brand-2:#6366f1; --accent:#7c3aed;
  }
  *{box-sizing:border-box}
  html{scroll-behavior:smooth}
  body{
    margin:0; font:16px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    color:var(--text);
    background:
      radial-gradient(1200px 800px at 20% -10%, #1f2937 0%, transparent 60%),
      radial-gradient(1000px 700px at 120% -20%, #0ea5e9 0%, transparent 45%),
      var(--bg);
    transition: background-color .25s, color .25s;
  }
  [data-theme="light"] body{
    background:
      radial-gradient(1000px 700px at -10% -20%, #e0f2fe 0%, transparent 55%),
      radial-gradient(900px 600px at 120% -30%, #ede9fe 0%, transparent 45%),
      var(--bg);
  }
  .wrap{max-width:1100px; margin:0 auto; padding:32px 16px}
  header.hero{
    padding:72px 0 56px; position:relative; overflow:hidden;
    border-bottom:1px solid var(--ring);
    background: linear-gradient(135deg, color-mix(in oklab, var(--brand) 15%, transparent) 0%, color-mix(in oklab, var(--accent) 12%, transparent) 100%);
  }
  .brand{font-weight:800; font-size:clamp(28px,5vw,40px); letter-spacing:.3px}
  .tagline{color:var(--muted); font-size:clamp(14px,2.6vw,18px)}
  nav{display:flex; gap:12px; flex-wrap:wrap; margin-top:18px; align-items:center}
  nav a{color:var(--text); text-decoration:none; padding:8px 12px; border:1px solid var(--ring); border-radius:999px; backdrop-filter:saturate(120%);}
  nav a:hover{border-color:color-mix(in oklab, var(--ring) 50%, var(--brand)); background:color-mix(in oklab, var(--bg-soft) 80%, var(--brand) 20%)}

  .theme-toggle{width:40px;height:40px;display:grid;place-items:center;border-radius:999px;border:1px solid var(--ring);background:color-mix(in oklab, var(--bg-soft) 85%, #0000 15%);cursor:pointer;user-select:none}
  .theme-toggle:hover{border-color:color-mix(in oklab, var(--ring) 40%, var(--brand));}
  .theme-toggle .sun,.theme-toggle .moon{font-size:18px;line-height:1}
  [data-theme="light"] .theme-toggle .sun{display:inline}
  [data-theme="light"] .theme-toggle .moon{display:none}
  .theme-toggle .sun{display:none}
  .theme-toggle .moon{display:inline}
  .top-right{position:absolute; top:18px; right:16px}

  .grid{display:grid; gap:18px}
  @media (min-width:768px){ .grid.cols-2{grid-template-columns:1fr 1fr} }

  section{padding:44px 0; border-bottom:1px solid var(--ring)}
  h2{font-size:clamp(22px,3.5vw,28px); margin:0 0 12px}
  p{margin:6px 0}

  .card{
    background: linear-gradient(var(--card), var(--card)) padding-box,
               linear-gradient(180deg, color-mix(in oklab, var(--brand) 15%, transparent), transparent) border-box;
    border:1px solid transparent; border-radius:20px; padding:18px;
    box-shadow:0 10px 28px rgba(2,6,23,.35);
    transition:transform .2s ease, box-shadow .2s ease, background .2s ease;
  }
  .card:hover{transform:translateY(-2px); box-shadow:0 18px 36px rgba(2,6,23,.45)}
  .card h3{margin:0 0 8px; font-size:18px}
  .card p{color:var(--muted)}

  .btn{display:inline-block; padding:10px 14px; border-radius:12px; text-decoration:none; color:#06121f; background:linear-gradient(90deg, var(--brand), var(--brand-2)); font-weight:700}
  .btn.ghost{background:transparent; color:var(--text); border:1px solid var(--ring)}
  .pill{color:#06121f; background:#a7f3d0; padding:4px 8px; border-radius:999px; font-size:12px; font-weight:700}
  footer{padding:36px 0; color:var(--muted)}
  .muted{color:var(--muted)}
  .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
  a{color:var(--brand-2)}
  /* å¯†ç å¼¹çª—æ ·å¼ */
  .pw-modal{position:fixed; inset:0; background:rgba(2,6,23,.55); backdrop-filter:blur(2px); display:grid; place-items:center; z-index:9999}
  .pw-modal[hidden]{display:none}
  .pw-dialog{width:min(420px,92vw); background:var(--bg-soft); color:var(--text); border:1px solid var(--ring); border-radius:16px; padding:18px; box-shadow:0 24px 60px rgba(2,6,23,.5)}
  .pw-dialog h3{margin:0 0 8px}
  .pw-input{width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--ring); background:transparent; color:var(--text)}
  .pw-actions{display:flex; justify-content:flex-end; gap:8px; margin-top:12px}
  .pw-error{color:#ef4444; font-size:13px; min-height:1.2em; margin-top:6px}
</style>
</head>
<body>
  <header class="hero">
    <div class="wrap">
      <div class="brand">Yan Zhang</div>
      <div class="tagline">MoirÃ© / twisted vdW materials Â· Continuum/TAPW Â· Topological analysis Â· IOPCAS</div>
      <nav>
  <a href="#about">å…³äº</a>
  <a href="#demos">é¡¹ç›®</a>
  <a href="#contact">è”ç³»</a>
  <a class="btn" href="https://github.com/zhangyan31415" target="_blank" rel="noopener">GitHub â†’</a>
</nav>
<button id="themeToggle" class="theme-toggle top-right" title="åˆ‡æ¢æ˜æš—" aria-label="åˆ‡æ¢æ˜æš—" aria-pressed="false"><span class="sun">ğŸŒ</span><span class="moon">ğŸŒ›</span></button>
    </div>
  </header>

  <!-- å¯†ç å¼¹çª—ï¼ˆå‰ç«¯è½»é‡é—¨ç¦ï¼›ä»…ä½œç®€æ˜“é®æŒ¡ï¼Œä¸ç­‰åŒå®‰å…¨è®¤è¯ï¼‰ -->
  <div id="pw-modal" class="pw-modal" hidden>
    <div class="pw-dialog">
      <h3>è¾“å…¥è®¿é—®å¯†ç </h3>
      <p class="muted" style="margin-top:-4px">è¯¥é¡¹ç›®å—ä¿æŠ¤ï¼Œè¯·è¾“å…¥å¯†ç ç»§ç»­ã€‚</p>
      <input id="pw-input" class="pw-input" type="password" placeholder="è¯·è¾“å…¥å¯†ç " autocomplete="current-password" />
      <div id="pw-error" class="pw-error" aria-live="polite"></div>
      <div class="pw-actions">
        <button id="pw-cancel" class="btn ghost" type="button">å–æ¶ˆ</button>
        <button id="pw-submit" class="btn" type="button">ç»§ç»­</button>
      </div>
    </div>
  </div>

  <main class="wrap">
    <section id="about">
      <h2>å…³äºæˆ‘</h2>
      <p>ä¸“æ³¨äºæ‰­è½¬/æ‘©å°”èŒƒå¾·åææ–™ä¸æ‹“æ‰‘åˆ†æã€‚æ­¤é¡µä»…ä½œåç‰‡ä¸å…¥å£ã€‚</p>    </section><section id="demos">
      <h2>é¡¹ç›®ä½“éªŒ</h2>
      <p class="muted" style="margin-top:-6px">æç¤ºï¼šç‚¹å‡»ä¸‹æ–¹ã€Œæ‰“å¼€é¡¹ç›®ã€åä¼šè·³è½¬åˆ°ä¸´æ—¶é€šé“é“¾æ¥ï¼›è¯¥é“¾æ¥<strong>å¯èƒ½å˜æ›´</strong>ã€‚è‹¥æ— æ³•æ‰“å¼€ï¼Œè¯·åˆ·æ–°æœ¬é¡µæˆ–ç¨åå†è¯•ã€‚</p>
      <div class="stack" style="display:flex; flex-direction:column; gap:16px; margin-top:16px">
        <article class="card">
          <h3 style="display:flex;align-items:center;gap:8px">Nano æœåŠ¡å™¨ç›‘æ§ <span class="pill">ç›‘æ§</span></h3>
          <p class="muted">è½»é‡ç›‘æ§é¢æ¿ï¼šçŠ¶æ€/èµ„æº/å‘Šè­¦ã€‚</p>
          <p style="margin:10px 0 14px;display:flex;gap:10px;flex-wrap:wrap">
            <a class="btn gate-link" href="#" data-project="nano" data-url="https://highlighted-friday-prisoner-butter.trycloudflare.com/">ğŸ”— æ‰“å¼€é¡¹ç›®</a>
            <button class="btn ghost gate-preview" data-project="nano" data-target="#frame-nano" data-src="https://highlighted-friday-prisoner-butter.trycloudflare.com/" type="button">åœ¨é¡µé¢å†…é¢„è§ˆ</button>
          </p>
          <p class="muted" style="margin:6px 0 0">æ‰“å¼€é¡¹ç›®åè·³è½¬çš„é“¾æ¥ä¸ºä¸´æ—¶é€šé“ï¼Œå¯èƒ½ä¼šæ›´æ–°ã€‚</p>
          <div id="frame-nano" class="embed" style="display:none">
            <iframe title="Nano Monitor" style="width:100%;height:60vh;border:1px solid #1f2937;border-radius:12px;background:#0b1220" loading="lazy" referrerpolicy="no-referrer"></iframe>
          </div>
        </article>

        <article class="card">
          <h3 style="display:flex;align-items:center;gap:8px">MoirÃ© Band Viewer <span class="pill">å®æ—¶</span></h3>
          <p class="muted">MoirÃ©èƒ½å¸¦ä¸æ‹“æ‰‘å¯è§†åŒ–ã€‚</p>
          <p style="margin:10px 0 14px;display:flex;gap:10px;flex-wrap:wrap">
            <a class="btn gate-link" href="#" data-project="band" data-url="https://ken-ipod-thorough-missouri.trycloudflare.com/">ğŸ”— æ‰“å¼€é¡¹ç›®</a>
            <button class="btn ghost gate-preview" data-project="band" data-target="#frame-band" data-src="https://ken-ipod-thorough-missouri.trycloudflare.com/" type="button">åœ¨é¡µé¢å†…é¢„è§ˆ</button>
          </p>
          <p class="muted" style="margin:6px 0 0">æ‰“å¼€é¡¹ç›®åè·³è½¬çš„é“¾æ¥ä¸ºä¸´æ—¶é€šé“ï¼Œå¯èƒ½ä¼šæ›´æ–°ã€‚</p>
          <div id="frame-band" class="embed" style="display:none">
            <iframe title="Band Viewer" style="width:100%;height:60vh;border:1px solid #1f2937;border-radius:12px;background:#0b1220" loading="lazy" referrerpolicy="no-referrer"></iframe>
          </div>
        </article>
      </div>
    </section>

    <section id="contact">
      <h2>è”ç³»</h2>
      <p>GitHubï¼š<a href="https://github.com/zhangyan31415" target="_blank" rel="noopener">@zhangyan31415</a></p>
      <!-- <p>é‚®ç®±ï¼š<span class="muted">ï¼ˆå¯åœ¨æ­¤å¡«å†™ä½ çš„é‚®ä»¶åœ°å€æˆ–è”ç³»ä¿¡æ¯ï¼‰</span></p> -->
    </section>
  </main>

  <footer>
    <div class="wrap muted">Â© <span id="y"></span> Yan Zhang Â· Built with GitHub Pages</div>
  </footer>

  <script>
  // ---------- ä¸»é¢˜åˆ‡æ¢ï¼ˆå¤ªé˜³ / æœˆäº®ï¼‰ ----------
(function(){
  const root = document.documentElement;
  const btn = document.getElementById('themeToggle');
  const sysDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  const saved = localStorage.getItem('theme');
  const init = saved || (sysDark ? 'dark':'light');
  root.setAttribute('data-theme', init);
  if(btn){ btn.setAttribute('aria-pressed', init==='dark'); }
  if(btn){ btn.addEventListener('click', ()=>{
    const cur = root.getAttribute('data-theme')==='dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', cur);
    localStorage.setItem('theme', cur);
    btn.setAttribute('aria-pressed', cur==='dark');
  }); }
})();

  // ---------- è®¿é—®å¯†ç é—¨æ§ï¼ˆå‰ç«¯å“ˆå¸Œæ ¡éªŒï¼›ä»…ç”¨äºæ¼”ç¤ºï¼‰ ----------
(function(){
  const modal = document.getElementById('pw-modal');
  const input = document.getElementById('pw-input');
  const err   = document.getElementById('pw-error');
  const btnOk = document.getElementById('pw-submit');
  const btnNo = document.getElementById('pw-cancel');
  let ctx = null; // {type:'link'|'preview', url, target, btn, project}

  // å­˜å‚¨å“ˆå¸Œï¼ˆSHA-256 hexï¼‰ï¼Œé¿å…æ˜æ–‡å‡ºç°åœ¨æºç ä¸­ï¼ˆæ³¨æ„ï¼šä»…é˜²å›å­ï¼Œä¸ç­‰åŒå®‰å…¨ï¼‰
  const PASS = {
    band: 'e00a03f9476a7bf2c6f8e9fe741d549323a133e85afdfee1823e9ca3e3a64a6c',
    nano: '0a5c81430ef4b9a449c4b94b8df61699fe2c725a7ef662862c6030c7e10083fc'  
  };

  async function sha256Hex(text){
    const enc = new TextEncoder();
    const buf = await crypto.subtle.digest('SHA-256', enc.encode(text));
    const arr = Array.from(new Uint8Array(buf));
    return arr.map(b=>b.toString(16).padStart(2,'0')).join('');
  }

  function openModal(newCtx){ ctx = newCtx; err.textContent=''; input.value=''; modal.hidden=false; setTimeout(()=>input.focus(), 10); }
  function closeModal(){ modal.hidden=true; ctx=null; }
  async function proceed(){
    if(!ctx) return; const val = input.value.trim();
    const h = await sha256Hex(val);
    if(h !== PASS[ctx.project]){ err.textContent='å¯†ç é”™è¯¯'; input.select(); return; }
    sessionStorage.setItem('ok-'+(ctx.project||''), '1');
    if(ctx.type==='link'){
      window.open(ctx.url, '_blank', 'noopener');
    }else{
      const wrap = document.querySelector(ctx.target);
      const frame = wrap.querySelector('iframe');
      if(wrap.style.display==='none' || !wrap.style.display){
        if(!frame.src){ frame.src = ctx.url; }
        wrap.style.display='block'; ctx.btn.textContent='æ”¶èµ·é¢„è§ˆ';
      }else{ wrap.style.display='none'; ctx.btn.textContent='åœ¨é¡µé¢å†…é¢„è§ˆ'; }
    }
    closeModal();
  }

  btnOk.addEventListener('click', proceed);
  btnNo.addEventListener('click', closeModal);
  input.addEventListener('keydown', e=>{ if(e.key==='Enter') proceed(); if(e.key==='Escape') closeModal(); });

  document.querySelectorAll('.gate-link').forEach(a=>{
    a.addEventListener('click', e=>{
      e.preventDefault();
      const url = a.dataset.url || a.getAttribute('href');
      const project = a.dataset.project || '';
      if(sessionStorage.getItem('ok-'+project)==='1'){ window.open(url,'_blank','noopener'); return; }
      openModal({type:'link', url, project});
    });
  });
  document.querySelectorAll('.gate-preview').forEach(btn=>{
    btn.addEventListener('click', e=>{
      e.preventDefault();
      const url = btn.dataset.src;
      const target = btn.dataset.target;
      const project = btn.dataset.project || '';
      if(sessionStorage.getItem('ok-'+project)==='1'){
        const wrap = document.querySelector(target);
        const frame = wrap.querySelector('iframe');
        if(wrap.style.display==='none' || !wrap.style.display){
          if(!frame.src){ frame.src = url; }
          wrap.style.display='block'; btn.textContent='æ”¶èµ·é¢„è§ˆ';
        }else{ wrap.style.display='none'; btn.textContent='åœ¨é¡µé¢å†…é¢„è§ˆ'; }
        return;
      }
      openModal({type:'preview', url, target, btn, project});
    });
  });
})();

// ---------- URL å‚æ•°è¦†ç›– Quick Tunnel åœ°å€ ----------
const u = new URLSearchParams(location.search);
const band = u.get('band');
const nano = u.get('nano');
if(band){
  const a = document.querySelector('a.gate-link[data-project="band"]');
  const b = document.querySelector('button.gate-preview[data-project="band"]');
  if(a) a.dataset.url = band; if(b) b.dataset.src = band;
}
if(nano){
  const a = document.querySelector('a.gate-link[data-project="nano"]');
  const b = document.querySelector('button.gate-preview[data-project="nano"]');
  if(a) a.dataset.url = nano; if(b) b.dataset.src = nano;
}
</script>
</body>
</html>
